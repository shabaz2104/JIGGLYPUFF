<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI Web System ‚Äì Smart Pharmacy</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&display=swap" rel="stylesheet">
<style>
:root{
  --g1:#0d2b1a;--g2:#14532d;--g3:#15803d;--g4:#22c55e;--g5:#86efac;
  --accent:#a3e635;--accent2:#facc15;--warn:#f97316;--danger:#ef4444;
  --bg:#0a1a0f;--surface:#0f2218;--card:#152c1e;--border:#1e4030;
  --text:#e8f5e9;--muted:#6b9e7e;--white:#ffffff;
  --font-head:'Syne',sans-serif;--font-body:'DM Sans',sans-serif;
  --r:12px;--shadow:0 8px 40px rgba(0,0,0,.5);
}
*{margin:0;padding:0;box-sizing:border-box}
html{scroll-behavior:smooth}
body{font-family:var(--font-body);background:var(--bg);color:var(--text);overflow-x:hidden}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:var(--g3);border-radius:3px}

/* ===== NAV ===== */
#mainNav{position:fixed;top:0;left:0;right:0;z-index:9999;padding:0 40px;height:68px;display:flex;align-items:center;justify-content:space-between;background:rgba(10,26,15,.85);backdrop-filter:blur(20px);border-bottom:1px solid var(--border);transition:.3s}
.nav-logo{font-family:var(--font-head);font-size:1.4rem;font-weight:800;color:var(--accent);letter-spacing:-.5px;cursor:pointer}
.nav-logo span{color:var(--g4)}
.nav-links{display:flex;align-items:center;gap:6px}
.nav-links a,.nav-links button{font-family:var(--font-body);font-size:.875rem;font-weight:500;color:var(--muted);background:none;border:none;cursor:pointer;padding:8px 14px;border-radius:8px;transition:.2s;text-decoration:none}
.nav-links a:hover,.nav-links button:hover{color:var(--text);background:var(--card)}
.nav-links a.active{color:var(--accent)}
.nav-right{display:flex;align-items:center;gap:10px}
.cart-btn{position:relative;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:8px 14px;color:var(--text);cursor:pointer;display:flex;align-items:center;gap:6px;font-size:.875rem;transition:.2s}
.cart-btn:hover{border-color:var(--g4)}
.cart-badge{position:absolute;top:-6px;right:-6px;background:var(--accent2);color:#000;font-size:.65rem;font-weight:700;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center}
.btn-login{background:transparent;border:1px solid var(--g3);color:var(--g4);border-radius:10px;padding:8px 18px;font-size:.875rem;font-weight:600;cursor:pointer;transition:.2s}
.btn-login:hover{background:var(--g3);color:#fff}
.btn-signup{background:var(--accent);color:#000;border:none;border-radius:10px;padding:8px 18px;font-size:.875rem;font-weight:700;cursor:pointer;transition:.2s}
.btn-signup:hover{background:var(--g4)}

/* ===== PAGES ===== */
.page{display:none;min-height:100vh;padding-top:68px}
.page.active{display:block}

/* ===== HERO ===== */
#heroSection{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;overflow:hidden;text-align:center;padding:80px 20px 60px}
.hero-bg{position:absolute;inset:0;z-index:0}
.hero-bg canvas{position:absolute;inset:0;opacity:.4}
.hero-orb{position:absolute;border-radius:50%;filter:blur(80px);animation:pulse 4s ease-in-out infinite alternate}
.orb1{width:600px;height:600px;background:radial-gradient(circle,rgba(34,197,94,.25),transparent);top:-200px;left:-200px;animation-delay:0s}
.orb2{width:500px;height:500px;background:radial-gradient(circle,rgba(163,230,53,.2),transparent);bottom:-100px;right:-100px;animation-delay:2s}
.orb3{width:300px;height:300px;background:radial-gradient(circle,rgba(250,204,21,.15),transparent);top:40%;left:50%;transform:translate(-50%,-50%);animation-delay:1s}
@keyframes pulse{from{transform:scale(1) translate(0,0)}to{transform:scale(1.1) translate(20px,-20px)}}
.hero-content{position:relative;z-index:2;max-width:800px}
.hero-badge{display:inline-flex;align-items:center;gap:8px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);border-radius:50px;padding:6px 16px;font-size:.8rem;font-weight:600;color:var(--g4);margin-bottom:32px;animation:fadeDown .8s ease both}
.hero-badge::before{content:'';width:8px;height:8px;background:var(--g4);border-radius:50%;animation:blink 1.5s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}
@keyframes fadeDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.hero-title{font-family:var(--font-head);font-size:clamp(2.5rem,6vw,5rem);font-weight:800;line-height:1.05;letter-spacing:-2px;margin-bottom:24px;animation:fadeUp .9s ease .2s both}
.hero-title .hl{color:var(--accent)}
.hero-subtitle{font-size:1.15rem;color:var(--muted);line-height:1.7;max-width:560px;margin:0 auto 36px;animation:fadeUp .9s ease .4s both}
.hero-cta{display:flex;flex-direction:column;align-items:center;gap:16px;animation:fadeUp .9s ease .6s both}
.btn-get-started{background:linear-gradient(135deg,var(--g3),var(--accent));color:#000;border:none;border-radius:14px;padding:16px 40px;font-family:var(--font-head);font-size:1.05rem;font-weight:700;cursor:pointer;transition:.25s;box-shadow:0 0 40px rgba(34,197,94,.3)}
.btn-get-started:hover{transform:translateY(-2px);box-shadow:0 0 60px rgba(34,197,94,.5)}
.hero-search{display:flex;align-items:center;gap:12px;background:rgba(15,34,24,.8);border:1px solid var(--border);border-radius:50px;padding:6px 8px 6px 20px;width:100%;max-width:520px;backdrop-filter:blur(10px)}
.hero-search input{background:none;border:none;outline:none;color:var(--text);font-family:var(--font-body);font-size:.95rem;flex:1;padding:6px 0}
.hero-search input::placeholder{color:var(--muted)}
.hero-search button{background:var(--accent);color:#000;border:none;border-radius:50px;padding:10px 22px;font-weight:700;font-size:.875rem;cursor:pointer;transition:.2s}
.hero-search button:hover{background:var(--g4)}
.hero-search-results{position:absolute;top:100%;left:0;right:0;background:var(--card);border:1px solid var(--border);border-radius:12px;max-height:300px;overflow-y:auto;z-index:100;display:none;text-align:left;margin-top:4px}
.hero-search-wrap{position:relative;width:100%;max-width:520px}
.search-result-item{padding:12px 16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--border);transition:.15s}
.search-result-item:hover{background:var(--surface)}
.search-result-item .sri-name{font-size:.875rem;font-weight:500}
.search-result-item .sri-price{color:var(--accent);font-weight:700;font-size:.875rem}
.hero-stats{display:flex;gap:48px;margin-top:60px;animation:fadeIn 1s ease 1s both;z-index:2;position:relative}
.stat-item{text-align:center}
.stat-num{font-family:var(--font-head);font-size:2rem;font-weight:800;color:var(--accent)}
.stat-label{font-size:.8rem;color:var(--muted);margin-top:4px}

/* ===== FEATURES ===== */
.section{padding:80px 40px}
.section-tag{display:inline-block;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.25);border-radius:50px;padding:4px 14px;font-size:.78rem;font-weight:600;color:var(--g4);margin-bottom:12px}
.section-title{font-family:var(--font-head);font-size:clamp(1.8rem,3vw,2.8rem);font-weight:800;letter-spacing:-1px;margin-bottom:12px}
.section-sub{color:var(--muted);font-size:1rem;line-height:1.7;max-width:560px}
.features-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;margin-top:48px}
.feature-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:28px;transition:.25s;cursor:default;position:relative;overflow:hidden}
.feature-card::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(34,197,94,.05),transparent);opacity:0;transition:.3s}
.feature-card:hover{border-color:var(--g3);transform:translateY(-4px);box-shadow:var(--shadow)}
.feature-card:hover::before{opacity:1}
.feature-icon{width:48px;height:48px;background:rgba(34,197,94,.15);border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;margin-bottom:16px}
.feature-title{font-family:var(--font-head);font-size:1.05rem;font-weight:700;margin-bottom:8px}
.feature-desc{color:var(--muted);font-size:.875rem;line-height:1.6}

/* ===== NOTIFICATION BAR ===== */
#notifBar{background:linear-gradient(90deg,var(--g2),rgba(21,128,61,.3));border-bottom:1px solid var(--border);padding:10px 40px;display:flex;align-items:center;gap:20px;overflow:hidden;position:relative}
.notif-label{font-size:.75rem;font-weight:700;color:var(--accent);text-transform:uppercase;letter-spacing:1px;white-space:nowrap;padding:4px 12px;background:rgba(163,230,53,.15);border-radius:6px}
.notif-ticker{display:flex;gap:32px;animation:ticker 30s linear infinite;white-space:nowrap}
@keyframes ticker{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.notif-item{font-size:.8rem;color:var(--text);display:flex;align-items:center;gap:8px}
.notif-item .badge{padding:2px 8px;border-radius:4px;font-size:.7rem;font-weight:700}
.badge-sale{background:rgba(250,204,21,.2);color:var(--accent2)}
.badge-low{background:rgba(239,68,68,.2);color:var(--danger)}

/* ===== AI DASHBOARD ===== */
#aiPage{padding-top:68px}
.ai-header{padding:24px 40px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.ai-header h2{font-family:var(--font-head);font-size:1.4rem;font-weight:700}
.ai-layout{display:grid;grid-template-columns:1fr 1fr;gap:0;height:calc(100vh - 68px - 61px - 80px)}

/* AI Panel */
.ai-panel{background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;height:100%}
.ai-panel-header{padding:20px 24px;border-bottom:1px solid var(--border);display:flex;align-items:center;gap:12px}
.ai-avatar{width:40px;height:40px;background:linear-gradient(135deg,var(--g3),var(--accent));border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.2rem}
.ai-panel-title h3{font-family:var(--font-head);font-size:1rem;font-weight:700}
.ai-panel-title p{font-size:.75rem;color:var(--muted)}
.order-meds-btn{margin-left:auto;background:rgba(34,197,94,.15);border:1px solid var(--g3);color:var(--g4);border-radius:8px;padding:6px 14px;font-size:.78rem;font-weight:600;cursor:pointer;transition:.2s}
.order-meds-btn:hover{background:var(--g3);color:#fff}
.ai-chat-area{flex:1;padding:20px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}
.ai-placeholder{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;text-align:center;gap:12px;color:var(--muted)}
.ai-placeholder .big-icon{font-size:3rem;opacity:.4}
.ai-placeholder p{font-size:.9rem;max-width:280px;line-height:1.6}
.chat-msg{max-width:80%;padding:12px 16px;border-radius:12px;font-size:.875rem;line-height:1.5}
.chat-msg.user{align-self:flex-end;background:var(--g3);color:#fff;border-bottom-right-radius:4px}
.chat-msg.ai{align-self:flex-start;background:var(--card);border:1px solid var(--border);border-bottom-left-radius:4px}
.chat-msg.ai .msg-badge{display:flex;align-items:center;gap:6px;font-size:.75rem;color:var(--g4);margin-top:8px;padding-top:8px;border-top:1px solid var(--border)}
.ai-input-area{padding:16px 20px;border-top:1px solid var(--border);display:flex;flex-direction:column;gap:10px}
.ai-input-row{display:flex;gap:10px;align-items:center}
.ai-input{flex:1;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:11px 14px;color:var(--text);font-family:var(--font-body);font-size:.875rem;outline:none;transition:.2s}
.ai-input:focus{border-color:var(--g4)}
.ai-send-btn{background:var(--g3);border:none;border-radius:10px;padding:11px 16px;color:#fff;cursor:pointer;font-size:1rem;transition:.2s}
.ai-send-btn:hover{background:var(--g4)}
.voice-call-btn{background:rgba(250,204,21,.1);border:1px solid rgba(250,204,21,.3);border-radius:10px;padding:10px 14px;color:var(--accent2);cursor:pointer;font-size:.875rem;font-weight:600;display:flex;align-items:center;gap:6px;transition:.2s}
.voice-call-btn:hover{background:rgba(250,204,21,.2)}
.voice-call-btn.active{background:var(--danger);border-color:var(--danger);color:#fff;animation:ring .5s infinite}
@keyframes ring{0%,100%{transform:scale(1)}50%{transform:scale(1.05)}}

/* Admin Dashboard Panel */
.admin-panel{background:var(--bg);display:flex;flex-direction:column;overflow-y:auto;padding:24px}
.dashboard-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:20px}
.dash-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px}
.dash-card-title{font-size:.75rem;font-weight:600;color:var(--muted);text-transform:uppercase;letter-spacing:1px;margin-bottom:8px}
.dash-card-value{font-family:var(--font-head);font-size:1.8rem;font-weight:800;color:var(--text)}
.dash-card-change{font-size:.78rem;margin-top:4px}
.change-pos{color:var(--g4)}.change-neg{color:var(--danger)}
.recent-orders-section{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:16px}
.section-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:16px}
.section-header h3{font-family:var(--font-head);font-size:1rem;font-weight:700}
.view-all-btn{font-size:.78rem;color:var(--g4);cursor:pointer;background:none;border:none}
.order-row{display:flex;align-items:center;justify-content:space-between;padding:10px 0;border-bottom:1px solid var(--border);font-size:.825rem}
.order-row:last-child{border-bottom:none}
.order-id{color:var(--muted);font-weight:600;font-size:.75rem}
.order-meds{flex:1;padding:0 12px}
.status-pill{padding:3px 10px;border-radius:50px;font-size:.7rem;font-weight:700}
.status-paid{background:rgba(34,197,94,.15);color:var(--g4)}
.status-pending{background:rgba(250,204,21,.15);color:var(--accent2)}
.status-progress{background:rgba(96,165,250,.15);color:#93c5fd}
.inventory-section{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px}
.inv-row{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px solid var(--border);font-size:.825rem}
.inv-row:last-child{border-bottom:none}
.inv-name{flex:1}
.inv-stock{font-weight:700;font-size:.9rem;min-width:40px;text-align:center}
.inv-bar{flex:1;height:6px;background:var(--surface);border-radius:3px;margin:0 12px;overflow:hidden}
.inv-fill{height:100%;border-radius:3px;transition:.5s}
.fill-good{background:var(--g4)}.fill-low{background:var(--warn)}.fill-crit{background:var(--danger)}
.inv-status{min-width:80px;text-align:right}
.alert-low{color:var(--warn);font-size:.75rem;font-weight:600}
.alert-crit{color:var(--danger);font-size:.75rem;font-weight:600}
.alert-ok{color:var(--g4);font-size:.75rem;font-weight:600}

/* Top Products */
.top-prod-item{display:flex;align-items:center;gap:12px;padding:8px 0;border-bottom:1px solid var(--border)}
.top-prod-item:last-child{border-bottom:none}
.prod-rank{width:24px;height:24px;background:var(--surface);border-radius:6px;display:flex;align-items:center;justify-content:center;font-size:.75rem;font-weight:700;color:var(--muted)}
.prod-info{flex:1}
.prod-info-name{font-size:.825rem;font-weight:500}
.prod-info-sold{font-size:.72rem;color:var(--muted)}
.prod-price{color:var(--accent);font-weight:700;font-size:.875rem}

/* ===== ADMIN PANEL PAGE ===== */
#adminPage{padding-top:68px;display:none}
#adminPage.active{display:flex}
.admin-sidebar{width:220px;min-height:calc(100vh - 68px);background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;padding:24px 0;position:sticky;top:68px;height:calc(100vh - 68px)}
.sidebar-logo{padding:0 20px 24px;border-bottom:1px solid var(--border);font-family:var(--font-head);font-size:1.1rem;font-weight:800;color:var(--accent)}
.sidebar-nav{padding:12px 12px;flex:1}
.sidebar-link{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;color:var(--muted);font-size:.875rem;font-weight:500;cursor:pointer;transition:.15s;margin-bottom:2px}
.sidebar-link:hover{background:var(--card);color:var(--text)}
.sidebar-link.active{background:rgba(34,197,94,.12);color:var(--g4);font-weight:600}
.sidebar-link .icon{font-size:1rem;width:20px;text-align:center}
.sidebar-footer{padding:12px 20px;border-top:1px solid var(--border);font-size:.75rem;color:var(--muted)}
.admin-main{flex:1;overflow-y:auto;padding:32px}
.admin-section{display:none}
.admin-section.active{display:block}
.admin-section-title{font-family:var(--font-head);font-size:1.5rem;font-weight:800;margin-bottom:24px}
.data-table{width:100%;border-collapse:collapse;background:var(--card);border-radius:var(--r);overflow:hidden}
.data-table th{background:var(--surface);padding:12px 16px;text-align:left;font-size:.75rem;font-weight:700;color:var(--muted);text-transform:uppercase;letter-spacing:.8px}
.data-table td{padding:12px 16px;font-size:.825rem;border-bottom:1px solid var(--border)}
.data-table tr:last-child td{border-bottom:none}
.data-table tr:hover td{background:rgba(34,197,94,.03)}
.admin-toolbar{display:flex;align-items:center;gap:12px;margin-bottom:20px;flex-wrap:wrap}
.admin-search{flex:1;min-width:200px;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px 16px;color:var(--text);font-family:var(--font-body);font-size:.875rem;outline:none}
.admin-search:focus{border-color:var(--g4)}
.admin-btn{background:var(--g3);border:none;border-radius:10px;padding:10px 18px;color:#fff;font-size:.875rem;font-weight:600;cursor:pointer;transition:.2s}
.admin-btn:hover{background:var(--g4)}
.admin-btn.secondary{background:var(--card);border:1px solid var(--border);color:var(--text)}
.admin-btn.secondary:hover{border-color:var(--g4)}
.admin-btn.danger{background:rgba(239,68,68,.15);border:1px solid rgba(239,68,68,.3);color:var(--danger)}
.stock-control{display:flex;align-items:center;gap:8px}
.stock-num{font-weight:700;min-width:32px;text-align:center}
.stock-btn{width:28px;height:28px;border-radius:7px;border:1px solid var(--border);background:var(--surface);color:var(--text);cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;transition:.15s}
.stock-btn:hover{border-color:var(--g4);color:var(--g4)}
.overview-cards{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:32px}
.ov-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px}
.ov-card-label{font-size:.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:.8px;margin-bottom:8px}
.ov-card-val{font-family:var(--font-head);font-size:2rem;font-weight:800}
.ov-card-sub{font-size:.78rem;margin-top:6px}
.chart-placeholder{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:20px;margin-bottom:20px}
.chart-area{height:160px;position:relative;overflow:hidden}
.chart-bars{display:flex;align-items:flex-end;justify-content:space-around;height:100%;padding:0 8px}
.chart-bar{background:linear-gradient(to top,var(--g3),var(--accent));border-radius:6px 6px 0 0;flex:1;margin:0 3px;transition:.3s;cursor:pointer;position:relative}
.chart-bar:hover{background:linear-gradient(to top,var(--g4),var(--accent));transform:scaleY(1.05)}
.chart-bar::after{content:attr(data-val);position:absolute;top:-20px;left:50%;transform:translateX(-50%);font-size:.65rem;color:var(--muted);white-space:nowrap}

/* ===== ABOUT PAGE ===== */
#aboutPage .section{max-width:900px;margin:0 auto}
.about-hero{background:linear-gradient(135deg,var(--g1),var(--surface));border-radius:20px;padding:48px;margin-bottom:40px;position:relative;overflow:hidden}
.about-hero::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 70% 50%,rgba(34,197,94,.1),transparent);pointer-events:none}
.about-hero h2{font-family:var(--font-head);font-size:2.2rem;font-weight:800;margin-bottom:16px;letter-spacing:-1px}
.about-body{font-size:1rem;line-height:1.9;color:var(--muted)}
.about-body p{margin-bottom:20px}
.about-body strong{color:var(--text)}
.timeline{margin-top:40px}
.timeline-item{display:flex;gap:24px;margin-bottom:28px}
.tl-dot{width:12px;height:12px;background:var(--g4);border-radius:50%;margin-top:6px;flex-shrink:0;position:relative}
.tl-dot::before{content:'';position:absolute;left:5px;top:12px;width:2px;height:100%;background:var(--border)}
.tl-content h4{font-family:var(--font-head);font-weight:700;margin-bottom:6px}
.tl-content p{font-size:.875rem;color:var(--muted);line-height:1.6}

/* ===== SAFETY PAGE ===== */
.safety-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:20px;margin-top:32px}
.safety-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:28px}
.safety-card h3{font-family:var(--font-head);font-size:1.1rem;font-weight:700;margin-bottom:12px;color:var(--g5)}
.safety-card p{font-size:.875rem;color:var(--muted);line-height:1.7}
.safety-card ul{margin-top:12px;padding-left:16px}
.safety-card ul li{font-size:.875rem;color:var(--muted);line-height:1.8;margin-bottom:4px}
.alert-box{background:rgba(249,115,22,.08);border:1px solid rgba(249,115,22,.3);border-radius:var(--r);padding:20px;margin:20px 0;display:flex;gap:12px}
.alert-box .icon{font-size:1.5rem;flex-shrink:0}
.alert-box p{font-size:.875rem;color:var(--text);line-height:1.6}

/* ===== MODAL ===== */
.modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:10000;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(4px);opacity:0;pointer-events:none;transition:.25s}
.modal-overlay.open{opacity:1;pointer-events:all}
.modal{background:var(--surface);border:1px solid var(--border);border-radius:16px;padding:36px;width:90%;max-width:440px;transform:scale(.95);transition:.25s}
.modal-overlay.open .modal{transform:scale(1)}
.modal h3{font-family:var(--font-head);font-size:1.3rem;font-weight:800;margin-bottom:24px}
.form-group{margin-bottom:18px}
.form-group label{display:block;font-size:.8rem;font-weight:600;color:var(--muted);margin-bottom:6px}
.form-group input,.form-group select{width:100%;background:var(--card);border:1px solid var(--border);border-radius:10px;padding:11px 14px;color:var(--text);font-family:var(--font-body);font-size:.9rem;outline:none;transition:.2s}
.form-group input:focus,.form-group select:focus{border-color:var(--g4)}
.modal-actions{display:flex;gap:12px;margin-top:24px}
.modal-close{position:absolute;top:16px;right:16px;background:none;border:none;color:var(--muted);font-size:1.4rem;cursor:pointer;line-height:1}
.modal-relative{position:relative}

/* ===== CART PANEL ===== */
#cartPanel{position:fixed;top:68px;right:-400px;width:380px;height:calc(100vh - 68px);background:var(--surface);border-left:1px solid var(--border);z-index:9000;transition:.3s;overflow-y:auto;padding:24px}
#cartPanel.open{right:0}
.cart-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:20px}
.cart-header h3{font-family:var(--font-head);font-size:1.1rem;font-weight:700}
.cart-close{background:none;border:none;color:var(--muted);font-size:1.3rem;cursor:pointer}
.cart-item{display:flex;align-items:center;gap:12px;padding:12px 0;border-bottom:1px solid var(--border)}
.cart-item-icon{width:40px;height:40px;background:rgba(34,197,94,.1);border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:1.2rem;flex-shrink:0}
.cart-item-info{flex:1}
.cart-item-name{font-size:.825rem;font-weight:500}
.cart-item-price{font-size:.8rem;color:var(--accent);font-weight:700}
.cart-item-qty{display:flex;align-items:center;gap:6px}
.cart-item-qty button{width:24px;height:24px;border-radius:6px;border:1px solid var(--border);background:var(--card);color:var(--text);cursor:pointer;font-size:.9rem;display:flex;align-items:center;justify-content:center}
.cart-total{padding:16px 0;border-top:1px solid var(--border);margin-top:8px}
.cart-total-row{display:flex;justify-content:space-between;font-size:.9rem;margin-bottom:8px}
.cart-total-row.final{font-family:var(--font-head);font-weight:700;font-size:1.1rem;color:var(--accent)}
.checkout-btn{width:100%;background:linear-gradient(135deg,var(--g3),var(--accent));color:#000;border:none;border-radius:12px;padding:14px;font-family:var(--font-head);font-size:1rem;font-weight:700;cursor:pointer;margin-top:12px;transition:.2s}
.checkout-btn:hover{opacity:.9}
.empty-cart{text-align:center;padding:40px 0;color:var(--muted);font-size:.9rem}
.empty-cart .icon{font-size:3rem;display:block;margin-bottom:12px;opacity:.4}

/* ===== TOAST ===== */
.toast{position:fixed;bottom:30px;left:50%;transform:translateX(-50%);background:var(--g2);border:1px solid var(--g3);color:var(--text);padding:12px 24px;border-radius:12px;font-size:.875rem;font-weight:500;z-index:99999;animation:toastIn .3s ease;pointer-events:none;display:flex;align-items:center;gap:8px}
@keyframes toastIn{from{opacity:0;bottom:10px}to{opacity:1;bottom:30px}}

/* ===== RESPONSIVE ===== */
@media(max-width:900px){
  .ai-layout{grid-template-columns:1fr;height:auto}
  .overview-cards{grid-template-columns:1fr 1fr}
  .dashboard-grid{grid-template-columns:1fr}
  #adminPage.active{flex-direction:column}
  .admin-sidebar{width:100%;min-height:auto;position:static;height:auto;flex-direction:row;padding:0;overflow-x:auto}
  .sidebar-nav{display:flex;padding:8px;gap:4px}
  .sidebar-link{white-space:nowrap}
  .sidebar-logo,.sidebar-footer{display:none}
  .hero-stats{gap:24px}
  .nav-links{display:none}
}
</style>
</head>
<body>

<!-- ===== NAVIGATION ===== -->
<nav id="mainNav">
  <div class="nav-logo" onclick="showPage('home')">üß¨ <span>AI Web</span> System</div>
  <div class="nav-links">
    <a href="#" class="active" onclick="showPage('home');return false">Home</a>
    <a href="#" onclick="showPage('ai');return false">AI + Dashboard</a>
    <a href="#" onclick="showPage('admin');return false">Admin Panel</a>
    <a href="#" onclick="showPage('about');return false">About</a>
    <a href="#" onclick="showPage('safety');return false">Safety</a>
  </div>
  <div class="nav-right">
    <button class="cart-btn" onclick="toggleCart()">üõí Cart <span class="cart-badge" id="cartBadge">0</span></button>
    <button class="btn-login" onclick="openModal('loginModal')">Login</button>
    <button class="btn-signup" onclick="openModal('signupModal')">Sign Up</button>
  </div>
</nav>

<!-- ===== NOTIFICATION BAR ===== -->
<div id="notifBar">
  <span class="notif-label">üîî Live</span>
  <div class="notif-ticker" id="notifTicker"></div>
</div>

<!-- ===== HOME PAGE ===== -->
<div class="page active" id="homePage" style="padding-top:0">
  <section id="heroSection">
    <div class="hero-bg">
      <div class="hero-orb orb1"></div>
      <div class="hero-orb orb2"></div>
      <div class="hero-orb orb3"></div>
    </div>
    <div class="hero-content">
      <div class="hero-badge">ü§ñ AI-Powered Pharmacy Platform</div>
      <h1 class="hero-title">Your Smart<br><span class="hl">Medication</span> Partner</h1>
      <p class="hero-subtitle">Harness the power of artificial intelligence for seamless medicine ordering, real-time inventory management, and 24/7 AI-assisted healthcare support.</p>
      <div class="hero-cta">
        <button class="btn-get-started" onclick="showPage('ai')">üöÄ Get Started</button>
        <div class="hero-search-wrap">
          <div class="hero-search">
            <span>üîç</span>
            <input type="text" id="heroSearchInput" placeholder="Search medicines, vitamins, supplements..." oninput="heroSearch(this.value)">
            <button onclick="heroSearch(document.getElementById('heroSearchInput').value)">Search</button>
          </div>
          <div class="hero-search-results" id="heroSearchResults"></div>
        </div>
      </div>
      <div class="hero-stats">
        <div class="stat-item"><div class="stat-num" id="statMeds">52</div><div class="stat-label">Medicines Available</div></div>
        <div class="stat-item"><div class="stat-num">24/7</div><div class="stat-label">AI Support</div></div>
        <div class="stat-item"><div class="stat-num">99.8%</div><div class="stat-label">Order Accuracy</div></div>
        <div class="stat-item"><div class="stat-num">‚àû</div><div class="stat-label">Prescriptions Processed</div></div>
      </div>
    </div>
  </section>

  <section class="section" style="background:var(--surface)">
    <div style="max-width:1100px;margin:0 auto">
      <span class="section-tag">Why AI Web System</span>
      <h2 class="section-title">Everything your pharmacy needs</h2>
      <p class="section-sub">From intelligent ordering to real-time stock management, our platform transforms how pharmacies operate.</p>
      <div class="features-grid">
        <div class="feature-card"><div class="feature-icon">ü§ñ</div><h4 class="feature-title">AI Voice & Text Assistant</h4><p class="feature-desc">Communicate naturally with our AI to place orders, check availability, or get medication information instantly.</p></div>
        <div class="feature-card"><div class="feature-icon">üì¶</div><h4 class="feature-title">Smart Inventory</h4><p class="feature-desc">Real-time stock tracking with automated low-stock alerts, refill predictions, and supplier integration.</p></div>
        <div class="feature-card"><div class="feature-icon">üìä</div><h4 class="feature-title">Analytics Dashboard</h4><p class="feature-desc">Comprehensive sales analytics, revenue tracking, and customer behavior insights in one place.</p></div>
        <div class="feature-card"><div class="feature-icon">üîî</div><h4 class="feature-title">Price Alerts</h4><p class="feature-desc">Get notified of price drops on frequently ordered medications and personalized discount offers.</p></div>
        <div class="feature-card"><div class="feature-icon">üîí</div><h4 class="feature-title">Secure & Compliant</h4><p class="feature-desc">HIPAA-compliant data handling, end-to-end encryption, and full audit trails for all transactions.</p></div>
        <div class="feature-card"><div class="feature-icon">üì±</div><h4 class="feature-title">Multi-Platform</h4><p class="feature-desc">Access from web, mobile, or tablet. Your pharmacy data syncs seamlessly across all devices.</p></div>
      </div>
    </div>
  </section>

  <section class="section">
    <div style="max-width:1100px;margin:0 auto">
      <span class="section-tag">Featured Products</span>
      <h2 class="section-title">Browse Medications</h2>
      <div class="admin-toolbar">
        <input type="text" class="admin-search" placeholder="Search products..." oninput="filterProducts(this.value)" id="productSearch">
        <select class="admin-search" style="max-width:160px" onchange="filterProducts(document.getElementById('productSearch').value)" id="priceFilter">
          <option value="">All Prices</option>
          <option value="low">Under ‚Ç¨15</option>
          <option value="mid">‚Ç¨15 ‚Äì ‚Ç¨30</option>
          <option value="high">Over ‚Ç¨30</option>
        </select>
      </div>
      <div id="productsGrid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:16px"></div>
    </div>
  </section>
</div>

<!-- ===== AI + DASHBOARD PAGE ===== -->
<div class="page" id="aiPage">
  <div class="ai-header">
    <h2>ü§ñ AI Assistant + Admin Dashboard</h2>
    <div style="display:flex;gap:10px;align-items:center">
      <span style="font-size:.8rem;color:var(--muted)">API Endpoint:</span>
      <code style="background:var(--card);padding:4px 10px;border-radius:6px;font-size:.75rem;color:var(--g4)">POST /api/v1/ai/chat</code>
    </div>
  </div>
  <div class="ai-layout">
    <!-- AI Panel -->
    <div class="ai-panel">
      <div class="ai-panel-header">
        <div class="ai-avatar">ü§ñ</div>
        <div class="ai-panel-title">
          <h3>Medication Order Assistant</h3>
          <p>Voice & Text Assistant ‚Äî <span style="color:var(--g4)">‚óè Online</span></p>
        </div>
        <button class="order-meds-btn" onclick="openModal('orderModal')">üíä Order Meds</button>
      </div>
      <div class="ai-chat-area" id="chatArea">
        <div class="ai-placeholder">
          <span class="big-icon">ü©∫</span>
          <p>Ask me anything about medications, dosages, availability, or to place an order. I'm here to help!</p>
        </div>
      </div>
      <div class="ai-input-area">
        <div class="ai-input-row">
          <button class="voice-call-btn" id="voiceCallBtn" onclick="toggleVoiceCall()">üìû Start Voice Call</button>
          <span style="font-size:.72rem;color:var(--muted)">‚Üí /api/v1/ai/voice-call</span>
        </div>
        <div class="ai-input-row">
          <input class="ai-input" id="chatInput" placeholder="Type your medication request..." onkeydown="if(event.key==='Enter')sendChat()">
          <button class="ai-send-btn" onclick="sendChat()">‚û§</button>
        </div>
        <div style="display:flex;gap:12px;flex-wrap:wrap">
          <span style="font-size:.7rem;color:var(--muted)">Quick:</span>
          <button onclick="quickChat('I need Paracetamol 500mg')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:20px;padding:4px 12px;font-size:.72rem;color:var(--g4);cursor:pointer">Paracetamol</button>
          <button onclick="quickChat('Check stock of Ibuprofen')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:20px;padding:4px 12px;font-size:.72rem;color:var(--g4);cursor:pointer">Check Stock</button>
          <button onclick="quickChat('What are my recent orders?')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:20px;padding:4px 12px;font-size:.72rem;color:var(--g4);cursor:pointer">My Orders</button>
        </div>
      </div>
    </div>

    <!-- Admin Dashboard Side -->
    <div class="admin-panel">
      <div style="margin-bottom:20px">
        <h3 style="font-family:var(--font-head);font-size:1.2rem;font-weight:800;margin-bottom:4px">Admin Dashboard</h3>
        <p style="font-size:.78rem;color:var(--muted)">Endpoint: GET /api/v1/admin/dashboard</p>
      </div>

      <div class="dashboard-grid">
        <div class="dash-card">
          <div class="dash-card-title">Total Revenue</div>
          <div class="dash-card-value">‚Ç¨112,200</div>
          <div class="dash-card-change change-pos">‚Üë +2% since last week</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-title">Total Profit</div>
          <div class="dash-card-value">‚Ç¨12,500</div>
          <div class="dash-card-change change-pos">‚Üë +8% since last week</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-title">Total Cost</div>
          <div class="dash-card-value">‚Ç¨48,200</div>
          <div class="dash-card-change change-neg">‚Üì -0.2% since last week</div>
        </div>
        <div class="dash-card">
          <div class="dash-card-title">Avg Order Value</div>
          <div class="dash-card-value">‚Ç¨96.50</div>
          <div class="dash-card-change change-pos">‚Üë +5% since last week</div>
        </div>
      </div>

      <!-- Recent Orders -->
      <div class="recent-orders-section">
        <div class="section-header"><h3>Recent Orders</h3><button class="view-all-btn" onclick="showPage('admin');switchAdminSection('orders')">View All ‚Üí</button></div>
        <div id="dashRecentOrders"></div>
      </div>

      <!-- Inventory -->
      <div class="inventory-section" style="margin-bottom:16px">
        <div class="section-header"><h3>Inventory Overview</h3><span style="font-size:.72rem;color:var(--muted)">GET /api/v1/inventory</span></div>
        <div id="dashInventory"></div>
      </div>

      <!-- Top Products -->
      <div class="recent-orders-section">
        <div class="section-header"><h3>Top Products</h3><span style="font-size:.72rem;color:var(--muted)">This Month</span></div>
        <div id="dashTopProducts"></div>
      </div>

      <!-- Pending Refills -->
      <div class="recent-orders-section" style="margin-top:16px">
        <div class="section-header"><h3>Pending Refill Requests</h3><span style="font-size:.72rem;color:var(--muted)">POST /api/v1/refills/approve</span></div>
        <div id="dashRefills"></div>
      </div>
    </div>
  </div>
</div>

<!-- ===== ADMIN PANEL PAGE ===== -->
<div class="page" id="adminPage">
  <div class="admin-sidebar">
    <div class="sidebar-logo">‚öïÔ∏è Admin Panel</div>
    <nav class="sidebar-nav">
      <div class="sidebar-link active" onclick="switchAdminSection('overview')"><span class="icon">üìä</span> Overview</div>
      <div class="sidebar-link" onclick="switchAdminSection('orders')"><span class="icon">üìã</span> Orders</div>
      <div class="sidebar-link" onclick="switchAdminSection('products')"><span class="icon">üíä</span> Products</div>
      <div class="sidebar-link" onclick="switchAdminSection('stock')"><span class="icon">üì¶</span> Stock</div>
      <div class="sidebar-link" onclick="switchAdminSection('customers')"><span class="icon">üë•</span> Customers</div>
      <div class="sidebar-link" onclick="switchAdminSection('payments')"><span class="icon">üí≥</span> Payments</div>
      <div class="sidebar-link" onclick="switchAdminSection('settings')"><span class="icon">‚öôÔ∏è</span> Settings</div>
    </nav>
    <div class="sidebar-footer">Endpoint Base: /api/v1/admin</div>
  </div>
  <div class="admin-main">
    <!-- Overview -->
    <div class="admin-section active" id="sec-overview">
      <h2 class="admin-section-title">Overview</h2>
      <div class="overview-cards">
        <div class="ov-card"><div class="ov-card-label">Total Revenue</div><div class="ov-card-val" style="color:var(--accent)">‚Ç¨112,200</div><div class="ov-card-sub change-pos">‚Üë +2% this week</div></div>
        <div class="ov-card"><div class="ov-card-label">Orders Today</div><div class="ov-card-val">47</div><div class="ov-card-sub change-pos">‚Üë 12 new</div></div>
        <div class="ov-card"><div class="ov-card-label">Low Stock Items</div><div class="ov-card-val" style="color:var(--warn)">8</div><div class="ov-card-sub alert-low">Needs attention</div></div>
        <div class="ov-card"><div class="ov-card-label">Active Customers</div><div class="ov-card-val">1,284</div><div class="ov-card-sub change-pos">‚Üë +34 this week</div></div>
      </div>
      <div class="chart-placeholder">
        <div class="section-header"><h3>Revenue ‚Äì This Month</h3><span style="font-size:.72rem;color:var(--muted)">GET /api/v1/analytics/revenue</span></div>
        <div class="chart-area"><div class="chart-bars" id="revenueChart"></div></div>
      </div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px">
        <div class="chart-placeholder">
          <h3 style="font-family:var(--font-head);font-size:1rem;font-weight:700;margin-bottom:12px">Orders by Time</h3>
          <div id="ordersTimeChart" style="height:120px;display:flex;align-items:flex-end;justify-content:space-around;padding:0 8px"></div>
          <div style="display:flex;justify-content:space-around;margin-top:6px;font-size:.65rem;color:var(--muted)">
            <span>9am</span><span>10am</span><span>11am</span><span>12pm</span><span>1pm</span><span>2pm</span><span>3pm</span>
          </div>
        </div>
        <div class="chart-placeholder">
          <h3 style="font-family:var(--font-head);font-size:1rem;font-weight:700;margin-bottom:12px">Top 5 Products</h3>
          <div id="overviewTopProd"></div>
        </div>
      </div>
    </div>

    <!-- Orders -->
    <div class="admin-section" id="sec-orders">
      <h2 class="admin-section-title">Orders</h2>
      <div style="font-size:.75rem;color:var(--muted);margin-bottom:16px">Endpoint: GET /api/v1/orders | Data imported from orders.xlsx</div>
      <div class="admin-toolbar">
        <input type="text" class="admin-search" placeholder="Search orders‚Ä¶" oninput="filterOrders(this.value)" id="orderSearch">
        <select class="admin-search" style="max-width:150px" id="orderStatusFilter" onchange="filterOrders(document.getElementById('orderSearch').value)">
          <option value="">All Status</option>
          <option>Completed</option>
          <option>Pending</option>
          <option>In Progress</option>
        </select>
        <button class="admin-btn" onclick="openModal('addOrderModal')">+ New Order</button>
        <button class="admin-btn secondary">‚¨á Export</button>
      </div>
      <div style="overflow-x:auto">
        <table class="data-table" id="ordersTable">
          <thead><tr><th>Order ID</th><th>Medicine</th><th>Customer</th><th>Price</th><th>Order Status</th><th>Payment</th><th>Date</th><th>Actions</th></tr></thead>
          <tbody id="ordersTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Products -->
    <div class="admin-section" id="sec-products">
      <h2 class="admin-section-title">Products</h2>
      <div style="font-size:.75rem;color:var(--muted);margin-bottom:16px">Endpoint: GET/POST/PUT/DELETE /api/v1/products | Source: order.xlsx</div>
      <div class="admin-toolbar">
        <input type="text" class="admin-search" placeholder="Search products‚Ä¶" oninput="filterAdminProducts(this.value)" id="adminProdSearch">
        <button class="admin-btn" onclick="openModal('addProductModal')">+ Add Product</button>
        <button class="admin-btn secondary">‚¨á Export CSV</button>
      </div>
      <div style="overflow-x:auto">
        <table class="data-table" id="adminProductsTable">
          <thead><tr><th>ID</th><th>Name</th><th>PZN</th><th>Price (‚Ç¨)</th><th>Package Size</th><th>Description</th><th>Actions</th></tr></thead>
          <tbody id="adminProductsBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Stock -->
    <div class="admin-section" id="sec-stock">
      <h2 class="admin-section-title">Stock Management</h2>
      <div style="font-size:.75rem;color:var(--muted);margin-bottom:16px">Endpoint: GET/PATCH /api/v1/inventory/stock</div>
      <div class="admin-toolbar">
        <input type="text" class="admin-search" placeholder="Search medicine stock‚Ä¶" oninput="filterStock(this.value)" id="stockSearch">
        <button class="admin-btn" onclick="openModal('addStockModal')">+ Add New Item</button>
        <button class="admin-btn secondary" onclick="showToast('üîî Low stock alert sent to suppliers')">Send Alert</button>
      </div>
      <div style="overflow-x:auto">
        <table class="data-table" id="stockTable">
          <thead><tr><th>Medicine</th><th>PZN</th><th>Current Stock</th><th>Adjust</th><th>Status</th><th>Reorder Level</th></tr></thead>
          <tbody id="stockTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Customers -->
    <div class="admin-section" id="sec-customers">
      <h2 class="admin-section-title">Customers</h2>
      <div style="font-size:.75rem;color:var(--muted);margin-bottom:16px">Endpoint: GET /api/v1/customers</div>
      <div class="admin-toolbar">
        <input type="text" class="admin-search" placeholder="Search customers‚Ä¶" oninput="filterCustomers(this.value)" id="custSearch">
        <button class="admin-btn" onclick="openModal('addCustomerModal')">+ Add Customer</button>
        <button class="admin-btn secondary">‚¨á Export</button>
      </div>
      <div style="overflow-x:auto">
        <table class="data-table" id="customersTable">
          <thead><tr><th>ID</th><th>Name</th><th>Email</th><th>Phone</th><th>Orders</th><th>Total Spent</th><th>Joined</th><th>Actions</th></tr></thead>
          <tbody id="customersTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Payments -->
    <div class="admin-section" id="sec-payments">
      <h2 class="admin-section-title">Payments</h2>
      <div style="font-size:.75rem;color:var(--muted);margin-bottom:16px">Endpoint: GET /api/v1/payments</div>
      <div class="admin-toolbar"><input type="text" class="admin-search" placeholder="Search payments‚Ä¶"></div>
      <div style="overflow-x:auto">
        <table class="data-table">
          <thead><tr><th>Transaction ID</th><th>Order ID</th><th>Customer</th><th>Amount</th><th>Method</th><th>Status</th><th>Date</th></tr></thead>
          <tbody id="paymentsTableBody"></tbody>
        </table>
      </div>
    </div>

    <!-- Settings -->
    <div class="admin-section" id="sec-settings">
      <h2 class="admin-section-title">Settings</h2>
      <div style="max-width:600px">
        <div class="recent-orders-section" style="margin-bottom:20px">
          <h3 style="margin-bottom:16px">General Settings</h3>
          <div class="form-group"><label>Pharmacy Name</label><input type="text" value="AI Web System Pharmacy" style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);width:100%;font-family:var(--font-body)"></div>
          <div class="form-group"><label>Low Stock Threshold</label><input type="number" value="10" style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);width:100%;font-family:var(--font-body)"></div>
          <div class="form-group"><label>AI Agent API Key</label><input type="password" value="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);width:100%;font-family:var(--font-body)"></div>
          <div class="form-group"><label>Backend API URL</label><input type="text" value="https://api.aiwebsystem.com/v1" style="background:var(--card);border:1px solid var(--border);border-radius:10px;padding:10px 14px;color:var(--text);width:100%;font-family:var(--font-body)"></div>
          <button class="admin-btn" onclick="showToast('‚úÖ Settings saved successfully')">Save Settings</button>
        </div>
        <div class="recent-orders-section">
          <h3 style="margin-bottom:16px">Notification Preferences</h3>
          <div style="display:flex;flex-direction:column;gap:12px">
            <label style="display:flex;align-items:center;gap:12px;font-size:.875rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--g4)"> Low stock alerts</label>
            <label style="display:flex;align-items:center;gap:12px;font-size:.875rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--g4)"> New order notifications</label>
            <label style="display:flex;align-items:center;gap:12px;font-size:.875rem;cursor:pointer"><input type="checkbox" checked style="accent-color:var(--g4)"> Price drop alerts</label>
            <label style="display:flex;align-items:center;gap:12px;font-size:.875rem;cursor:pointer"><input type="checkbox" style="accent-color:var(--g4)"> Weekly analytics report</label>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ===== ABOUT PAGE ===== -->
<div class="page" id="aboutPage">
  <div class="section">
    <div style="max-width:900px;margin:0 auto">
      <span class="section-tag">Our Story</span>
      <h2 class="section-title">About AI Web System</h2>
      <div class="about-hero">
        <h2>Revolutionizing Pharmacy Management with Artificial Intelligence</h2>
        <div class="about-body">
          <p><strong>AI Web System</strong> is a cutting-edge, AI-driven pharmacy management platform built to bridge the gap between modern healthcare demands and outdated pharmacy operations. Founded with a singular mission ‚Äî to make medication management smarter, faster, and safer ‚Äî we have grown into a comprehensive ecosystem trusted by pharmacies, clinics, and healthcare providers worldwide.</p>
          <p>Our platform integrates advanced natural language processing, real-time inventory intelligence, and predictive analytics into a single, unified interface. Whether you're a solo pharmacist managing a community pharmacy or an enterprise managing hundreds of locations, AI Web System scales effortlessly to meet your needs.</p>
          <p>We believe that the future of pharmacy is intelligent. <strong>Every medication matters. Every patient matters.</strong> That's why our AI assistant is designed to understand not just what a patient needs, but why ‚Äî helping pharmacists make informed dispensing decisions backed by data, not guesswork.</p>
          <p>Our team is composed of pharmacists, data scientists, software engineers, and healthcare compliance experts who collectively bring decades of experience to every feature we build. We work closely with regulatory bodies to ensure our platform remains fully compliant with pharmaceutical laws across jurisdictions.</p>
          <p>Since our inception, we have processed over <strong>2 million prescriptions</strong>, managed inventory for <strong>500+ pharmacy locations</strong>, and maintained a <strong>99.8% order accuracy rate</strong> ‚Äî a testament to the reliability and precision of our AI models. Our voice and text AI assistant handles everything from simple stock queries to complex multi-medication orders, reducing human error and dispensing time by up to 40%.</p>
          <p>We are committed to continuous innovation. Our research and development team is currently working on predictive drug shortage models, AI-assisted pharmacovigilance, and deep integrations with electronic health record (EHR) systems. Our vision is a world where pharmacies operate proactively, not reactively ‚Äî anticipating patient needs before they arise.</p>
          <p><strong>AI Web System is more than software. It is your pharmacy's most reliable partner.</strong></p>
        </div>
      </div>
      <div class="features-grid" style="margin-top:0">
        <div class="feature-card"><div class="feature-icon">üéØ</div><h4 class="feature-title">Our Mission</h4><p class="feature-desc">To empower pharmacies worldwide with intelligent tools that improve patient outcomes, reduce waste, and streamline every aspect of medication management.</p></div>
        <div class="feature-card"><div class="feature-icon">üëÅÔ∏è</div><h4 class="feature-title">Our Vision</h4><p class="feature-desc">A global healthcare ecosystem where AI and human expertise work in harmony to deliver personalized, accurate, and accessible pharmacy services to every patient.</p></div>
        <div class="feature-card"><div class="feature-icon">üí°</div><h4 class="feature-title">Our Values</h4><p class="feature-desc">Integrity in data handling, transparency in AI decisions, accessibility for all pharmacy sizes, and an unwavering commitment to patient safety above all else.</p></div>
      </div>
      <h3 style="font-family:var(--font-head);font-size:1.3rem;font-weight:800;margin-top:48px;margin-bottom:24px">Our Journey</h3>
      <div class="timeline">
        <div class="timeline-item"><div class="tl-dot"></div><div class="tl-content"><h4>2019 ‚Äì Founded</h4><p>AI Web System was founded by a team of pharmacists and AI researchers with a shared vision to digitize pharmacy operations.</p></div></div>
        <div class="timeline-item"><div class="tl-dot"></div><div class="tl-content"><h4>2020 ‚Äì First AI Model</h4><p>Launched our first natural language medication ordering model, reducing phone-in order errors by 67% in pilot pharmacies.</p></div></div>
        <div class="timeline-item"><div class="tl-dot"></div><div class="tl-content"><h4>2021 ‚Äì 100+ Pharmacies</h4><p>Crossed the milestone of 100 active pharmacy integrations and launched real-time inventory intelligence features.</p></div></div>
        <div class="timeline-item"><div class="tl-dot"></div><div class="tl-content"><h4>2023 ‚Äì Voice AI Launch</h4><p>Introduced voice-enabled AI ordering ‚Äî allowing patients and staff to place orders hands-free through natural conversation.</p></div></div>
        <div class="timeline-item"><div class="tl-dot"></div><div class="tl-content"><h4>2025 ‚Äì Global Expansion</h4><p>Expanded operations to 30 countries, launched multi-language support, and integrated with major EHR platforms worldwide.</p></div></div>
      </div>
    </div>
  </div>
</div>

<!-- ===== SAFETY PAGE ===== -->
<div class="page" id="safetyPage">
  <div class="section">
    <div style="max-width:1000px;margin:0 auto">
      <span class="section-tag">Safety & Compliance</span>
      <h2 class="section-title">Safety, Maintenance & Compliance</h2>
      <p class="section-sub" style="margin-bottom:32px">We take patient safety and data security seriously. Our platform is built on a foundation of pharmaceutical best practices, regulatory compliance, and continuous monitoring.</p>
      <div class="alert-box"><span class="icon">‚ö†Ô∏è</span><p><strong>Important:</strong> AI Web System is a management and ordering assistance platform. All final dispensing decisions must be made by a licensed pharmacist. Our AI provides recommendations and information ‚Äî it does not replace professional medical or pharmaceutical judgment.</p></div>
      <div class="safety-grid">
        <div class="safety-card"><h3>üîí Data Security</h3><p>All patient and transaction data is encrypted using AES-256 at rest and TLS 1.3 in transit. We maintain strict access controls with role-based permissions, multi-factor authentication, and complete audit trails for every data access event.</p><ul><li>HIPAA & GDPR compliant</li><li>SOC 2 Type II certified infrastructure</li><li>Zero-trust security architecture</li><li>Regular penetration testing by third-party experts</li></ul></div>
        <div class="safety-card"><h3>üíä Medication Safety</h3><p>Our AI is trained on clinical databases including WHO Essential Medicines, national pharmacopeias, and peer-reviewed drug interaction databases. The system flags potential drug interactions, contraindications, and dosage anomalies automatically.</p><ul><li>Real-time drug interaction checks</li><li>Automated dosage validation</li><li>Allergen and contraindication alerts</li><li>Integration with national drug registries</li></ul></div>
        <div class="safety-card"><h3>üìã Regulatory Compliance</h3><p>AI Web System complies with pharmaceutical regulations across all supported jurisdictions. We maintain current certifications and update our compliance modules in response to regulatory changes within 30 days of notification.</p><ul><li>FDA 21 CFR Part 11 compliance</li><li>EU GMP and GDP guidelines</li><li>Local pharmacy board integrations</li><li>Prescription verification protocols</li></ul></div>
        <div class="safety-card"><h3>üîß System Maintenance</h3><p>Our infrastructure is maintained with 99.9% uptime SLA. Scheduled maintenance windows are communicated 72 hours in advance. Emergency patches are deployed within 4 hours of critical vulnerability disclosure.</p><ul><li>Rolling updates with zero downtime</li><li>Automated database backups every 6 hours</li><li>Disaster recovery with 15-minute RTO</li><li>24/7 infrastructure monitoring</li></ul></div>
        <div class="safety-card"><h3>ü§ñ AI Ethics & Transparency</h3><p>Our AI models are audited quarterly for bias, accuracy, and safety. We maintain explainability frameworks so pharmacists can understand why the AI makes specific recommendations. All AI decisions are logged and reviewable.</p><ul><li>Explainable AI (XAI) architecture</li><li>Quarterly model bias audits</li><li>Human-in-the-loop for critical decisions</li><li>Model version control and rollback capability</li></ul></div>
        <div class="safety-card"><h3>üìû Incident Response</h3><p>In the event of a security incident, system failure, or medication-related alert, our incident response team is available 24/7. We commit to notifying affected parties within 72 hours as required by GDPR and HIPAA breach notification rules.</p><ul><li>24/7 security operations center</li><li>72-hour breach notification</li><li>Dedicated pharmacovigilance hotline</li><li>Post-incident forensic analysis</li></ul></div>
      </div>
      <div class="alert-box" style="margin-top:32px;background:rgba(34,197,94,.06);border-color:rgba(34,197,94,.25)"><span class="icon">‚úÖ</span><p>For safety concerns, compliance inquiries, or to report a potential issue, contact our Safety Team at <strong style="color:var(--g4)">safety@aiwebsystem.com</strong> or call our 24/7 hotline: <strong style="color:var(--g4)">+1 (800) AI-SAFE-1</strong>.</p></div>
    </div>
  </div>
</div>

<!-- ===== CART PANEL ===== -->
<div id="cartPanel">
  <div class="cart-header"><h3>üõí Your Cart</h3><button class="cart-close" onclick="toggleCart()">‚úï</button></div>
  <div id="cartItems"><div class="empty-cart"><span class="icon">üõí</span>Your cart is empty</div></div>
  <div id="cartFooter"></div>
</div>

<!-- ===== MODALS ===== -->
<div class="modal-overlay" id="loginModal" onclick="closeModalOutside(event,'loginModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('loginModal')">‚úï</button>
    <h3>üîê Login</h3>
    <div class="form-group"><label>Email</label><input type="email" placeholder="you@pharmacy.com"></div>
    <div class="form-group"><label>Password</label><input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <div class="form-group"><label>Role</label><select><option>Pharmacist</option><option>Admin</option><option>Customer</option></select></div>
    <div class="modal-actions"><button class="admin-btn" onclick="handleLogin()">Login</button><button class="admin-btn secondary" onclick="closeModal('loginModal')">Cancel</button></div>
    <p style="font-size:.78rem;color:var(--muted);margin-top:12px">API: POST /api/v1/auth/login</p>
  </div>
</div>

<div class="modal-overlay" id="signupModal" onclick="closeModalOutside(event,'signupModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('signupModal')">‚úï</button>
    <h3>‚ú® Create Account</h3>
    <div class="form-group"><label>Full Name</label><input type="text" placeholder="John Doe"></div>
    <div class="form-group"><label>Email</label><input type="email" placeholder="you@pharmacy.com"></div>
    <div class="form-group"><label>Password</label><input type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
    <div class="form-group"><label>Role</label><select><option>Customer</option><option>Pharmacist</option><option>Admin</option></select></div>
    <div class="modal-actions"><button class="admin-btn" onclick="showToast('‚úÖ Account created! Check your email.');closeModal('signupModal')">Sign Up</button><button class="admin-btn secondary" onclick="closeModal('signupModal')">Cancel</button></div>
    <p style="font-size:.78rem;color:var(--muted);margin-top:12px">API: POST /api/v1/auth/register</p>
  </div>
</div>

<div class="modal-overlay" id="orderModal" onclick="closeModalOutside(event,'orderModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('orderModal')">‚úï</button>
    <h3>üíä Order Medications</h3>
    <div class="form-group"><label>Medicine Name</label><input type="text" id="orderMedName" placeholder="e.g. Paracetamol 650mg"></div>
    <div class="form-group"><label>Quantity</label><input type="number" id="orderQty" value="1" min="1"></div>
    <div class="form-group"><label>Prescription Required?</label><select><option>No</option><option>Yes ‚Äì Upload</option></select></div>
    <div class="form-group"><label>Notes</label><input type="text" placeholder="Special instructions‚Ä¶"></div>
    <div class="modal-actions"><button class="admin-btn" onclick="placeOrder()">Place Order</button><button class="admin-btn secondary" onclick="closeModal('orderModal')">Cancel</button></div>
    <p style="font-size:.78rem;color:var(--muted);margin-top:12px">API: POST /api/v1/orders/create</p>
  </div>
</div>

<div class="modal-overlay" id="addOrderModal" onclick="closeModalOutside(event,'addOrderModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('addOrderModal')">‚úï</button>
    <h3>üìã New Order</h3>
    <div class="form-group"><label>Customer</label><input type="text" placeholder="Customer name"></div>
    <div class="form-group"><label>Medicine</label><input type="text" placeholder="Medicine name & qty"></div>
    <div class="form-group"><label>Price (‚Ç¨)</label><input type="number" placeholder="0.00"></div>
    <div class="form-group"><label>Payment Status</label><select><option>Paid</option><option>Pending</option></select></div>
    <div class="modal-actions"><button class="admin-btn" onclick="showToast('‚úÖ Order created');closeModal('addOrderModal')">Create</button><button class="admin-btn secondary" onclick="closeModal('addOrderModal')">Cancel</button></div>
  </div>
</div>

<div class="modal-overlay" id="addProductModal" onclick="closeModalOutside(event,'addProductModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('addProductModal')">‚úï</button>
    <h3>üíä Add Product</h3>
    <div class="form-group"><label>Product Name</label><input type="text" placeholder="Medicine name"></div>
    <div class="form-group"><label>PZN</label><input type="text" placeholder="12345678"></div>
    <div class="form-group"><label>Price (‚Ç¨)</label><input type="number" placeholder="0.00"></div>
    <div class="form-group"><label>Package Size</label><input type="text" placeholder="e.g. 100 st"></div>
    <div class="modal-actions"><button class="admin-btn" onclick="showToast('‚úÖ Product added');closeModal('addProductModal')">Add</button><button class="admin-btn secondary" onclick="closeModal('addProductModal')">Cancel</button></div>
  </div>
</div>

<div class="modal-overlay" id="addStockModal" onclick="closeModalOutside(event,'addStockModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('addStockModal')">‚úï</button>
    <h3>üì¶ Add Stock Item</h3>
    <div class="form-group"><label>Medicine Name</label><input type="text" placeholder="Name"></div>
    <div class="form-group"><label>PZN</label><input type="text" placeholder="PZN code"></div>
    <div class="form-group"><label>Initial Stock</label><input type="number" value="50"></div>
    <div class="form-group"><label>Reorder Level</label><input type="number" value="10"></div>
    <div class="modal-actions"><button class="admin-btn" onclick="showToast('‚úÖ Stock item added');closeModal('addStockModal')">Add</button><button class="admin-btn secondary" onclick="closeModal('addStockModal')">Cancel</button></div>
  </div>
</div>

<div class="modal-overlay" id="addCustomerModal" onclick="closeModalOutside(event,'addCustomerModal')">
  <div class="modal modal-relative">
    <button class="modal-close" onclick="closeModal('addCustomerModal')">‚úï</button>
    <h3>üë§ Add Customer</h3>
    <div class="form-group"><label>Full Name</label><input type="text" placeholder="John Doe"></div>
    <div class="form-group"><label>Email</label><input type="email" placeholder="john@example.com"></div>
    <div class="form-group"><label>Phone</label><input type="tel" placeholder="+1 555 0000"></div>
    <div class="modal-actions"><button class="admin-btn" onclick="showToast('‚úÖ Customer added');closeModal('addCustomerModal')">Add</button><button class="admin-btn secondary" onclick="closeModal('addCustomerModal')">Cancel</button></div>
  </div>
</div>

<script>
// ===== DATA =====
const PRODUCTS = [
  {id:16066,name:'Panthenol Spray',pzn:'04020784',price:16.95,size:'130 g',desc:'Skin foam spray for repair and moisture.',stock:45,cat:'Skincare'},
  {id:976308,name:'NORSAN Omega-3 Total',pzn:'13476520',price:27,size:'200 ml',desc:'Liquid Omega-3 fish oil for heart and brain.',stock:32,cat:'Supplements'},
  {id:977179,name:'NORSAN Omega-3 Vegan',pzn:'13476394',price:29,size:'100 ml',desc:'Plant-based Omega-3 from algae.',stock:28,cat:'Supplements'},
  {id:993687,name:'NORSAN Omega-3 Kapseln',pzn:'13512730',price:29,size:'120 st',desc:'Omega-3 capsules for daily supplementation.',stock:54,cat:'Supplements'},
  {id:1225428,name:'Vividrin¬Æ EDO Augentropfen',pzn:'16507327',price:8.28,size:'30x0.5ml',desc:'Antiallergic preservative-free eye drops.',stock:18,cat:'Eye Care'},
  {id:202796,name:'Aqualibra Filmtabletten',pzn:'00795287',price:27.82,size:'60 st',desc:'Herbal bladder support tablets.',stock:22,cat:'Urology'},
  {id:1103035,name:'Vitasprint Pro Energie',pzn:'14050243',price:15.95,size:'8 st',desc:'B-vitamin energy supplement.',stock:67,cat:'Vitamins'},
  {id:27955,name:'Cystinol akut¬Æ',pzn:'07114824',price:26.5,size:'60 st',desc:'Herbal UTI treatment.',stock:15,cat:'Urology'},
  {id:30955,name:'Cromo-ratiopharm¬Æ Augentropfen',pzn:'04884527',price:7.59,size:'20x0.5ml',desc:'Anti-allergic eye drops.',stock:40,cat:'Eye Care'},
  {id:1162261,name:'Kijimea Reizdarm PRO',pzn:'15999676',price:38.99,size:'28 st',desc:'IBS symptom relief medical product.',stock:12,cat:'Gastro'},
  {id:1204782,name:'Mucosolvan Retardkapseln',pzn:'15210915',price:39.97,size:'50 st',desc:'Long-acting cough expectorant.',stock:30,cat:'Respiratory'},
  {id:1210016,name:'OMNi-BiOTiC SR-9',pzn:'16487346',price:44.5,size:'28x3g',desc:'Probiotic with B-vitamins for gut health.',stock:25,cat:'Gastro'},
  {id:1245942,name:'Osa Schorf Spray',pzn:'16781761',price:15.45,size:'30 ml',desc:'Gentle spray for baby cradle cap care.',stock:35,cat:'Skincare'},
  {id:1247528,name:'Multivitamin Fruchtgummib√§rchen',pzn:'16908486',price:12.74,size:'60 st',desc:'Vegan sugar-free multivitamin gummies.',stock:80,cat:'Vitamins'},
  {id:1273105,name:'Iberogast¬Æ Classic',pzn:'16507540',price:28.98,size:'50 ml',desc:'Herbal remedy for stomach complaints.',stock:20,cat:'Gastro'},
];

const ORDERS = [
  {id:'#ORD576',meds:'Paracetamol (2), Ibuprofen (1)',customer:'Anna M√ºller',price:'‚Ç¨25.50',status:'Completed',payment:'Paid',date:'2025-02-20'},
  {id:'#ORD575',meds:'Amoxicillin (3), Cetirizine (2)',customer:'Karl Schmidt',price:'‚Ç¨42.00',status:'In Progress',payment:'Pending',date:'2025-02-20'},
  {id:'#ORD574',meds:'Loratadine (1), Omeprazole (1)',customer:'Maria Weber',price:'‚Ç¨15.00',status:'Pending',payment:'Paid',date:'2025-02-19'},
  {id:'#ORD573',meds:'Aspirin (4), Hydrocodone (1)',customer:'Peter Braun',price:'‚Ç¨48.00',status:'Completed',payment:'Paid',date:'2025-02-19'},
  {id:'#ORD572',meds:'NORSAN Omega-3 Total (2)',customer:'Lisa Fischer',price:'‚Ç¨54.00',status:'Completed',payment:'Paid',date:'2025-02-18'},
  {id:'#ORD571',meds:'Vitasprint Pro (3)',customer:'Tom Klein',price:'‚Ç¨47.85',status:'Pending',payment:'Pending',date:'2025-02-18'},
  {id:'#ORD570',meds:'Kijimea Reizdarm PRO (1)',customer:'Sophie Wolf',price:'‚Ç¨38.99',status:'In Progress',payment:'Paid',date:'2025-02-17'},
  {id:'#ORD569',meds:'Mucosolvan Retardkapseln (1)',customer:'Klaus Bauer',price:'‚Ç¨39.97',status:'Completed',payment:'Paid',date:'2025-02-17'},
];

const CUSTOMERS = [
  {id:'C001',name:'Anna M√ºller',email:'anna@example.com',phone:'+49 170 1234567',orders:12,spent:'‚Ç¨340.20',joined:'2023-03-15'},
  {id:'C002',name:'Karl Schmidt',email:'karl@example.com',phone:'+49 160 2345678',orders:8,spent:'‚Ç¨220.50',joined:'2023-06-22'},
  {id:'C003',name:'Maria Weber',email:'maria@example.com',phone:'+49 151 3456789',orders:15,spent:'‚Ç¨480.75',joined:'2022-11-01'},
  {id:'C004',name:'Peter Braun',email:'peter@example.com',phone:'+49 176 4567890',orders:5,spent:'‚Ç¨155.00',joined:'2024-01-10'},
  {id:'C005',name:'Lisa Fischer',email:'lisa@example.com',phone:'+49 162 5678901',orders:20,spent:'‚Ç¨620.40',joined:'2022-07-08'},
  {id:'C006',name:'Tom Klein',email:'tom@example.com',phone:'+49 171 6789012',orders:3,spent:'‚Ç¨95.85',joined:'2024-09-30'},
  {id:'C007',name:'Sophie Wolf',email:'sophie@example.com',phone:'+49 173 7890123',orders:9,spent:'‚Ç¨278.33',joined:'2023-04-17'},
];

const STOCK = [
  {name:'Panthenol Spray',pzn:'04020784',stock:45,reorder:10},
  {name:'NORSAN Omega-3 Total',pzn:'13476520',stock:32,reorder:15},
  {name:'Ibuprofen 400mg',pzn:'00123456',stock:8,reorder:20},
  {name:'Amoxicillin 500mg',pzn:'00234567',stock:5,reorder:25},
  {name:'Paracetamol 650mg',pzn:'00345678',stock:55,reorder:20},
  {name:'Vividrin EDO Augentropfen',pzn:'16507327',stock:18,reorder:10},
  {name:'Cetirizine 10mg',pzn:'00456789',stock:2,reorder:15},
  {name:'Loratadine 10mg',pzn:'00567890',stock:30,reorder:10},
  {name:'Omeprazole 20mg',pzn:'00678901',stock:42,reorder:15},
  {name:'Kijimea Reizdarm PRO',pzn:'15999676',stock:12,reorder:10},
  {name:'Mucosolvan Retardkapseln',pzn:'15210915',stock:30,reorder:12},
  {name:'OMNi-BiOTiC SR-9',pzn:'16487346',stock:25,reorder:10},
  {name:'Vitasprint Pro Energie',pzn:'14050243',stock:67,reorder:10},
  {name:'Cystinol akut¬Æ',pzn:'07114824',stock:15,reorder:12},
  {name:'Iberogast¬Æ Classic',pzn:'16507540',stock:20,reorder:10},
];

const PAYMENTS = [
  {txn:'TXN-8821',order:'#ORD576',customer:'Anna M√ºller',amount:'‚Ç¨25.50',method:'Credit Card',status:'Completed',date:'2025-02-20'},
  {txn:'TXN-8820',order:'#ORD575',customer:'Karl Schmidt',amount:'‚Ç¨42.00',method:'PayPal',status:'Pending',date:'2025-02-20'},
  {txn:'TXN-8819',order:'#ORD574',customer:'Maria Weber',amount:'‚Ç¨15.00',method:'Bank Transfer',status:'Completed',date:'2025-02-19'},
  {txn:'TXN-8818',order:'#ORD573',customer:'Peter Braun',amount:'‚Ç¨48.00',method:'Credit Card',status:'Completed',date:'2025-02-19'},
  {txn:'TXN-8817',order:'#ORD572',customer:'Lisa Fischer',amount:'‚Ç¨54.00',method:'Credit Card',status:'Completed',date:'2025-02-18'},
];

// Cart state
let cart = [];
let currentPage = 'home';

// ===== NAVIGATION =====
function showPage(page){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.nav-links a').forEach(a=>a.classList.remove('active'));
  currentPage = page;
  const map = {home:'homePage',ai:'aiPage',admin:'adminPage',about:'aboutPage',safety:'safetyPage'};
  const el = document.getElementById(map[page]);
  if(el) el.classList.add('active');
  // highlight nav
  const navLinks = document.querySelectorAll('.nav-links a');
  const navMap = {home:0,ai:1,admin:2,about:3,safety:4};
  if(navMap[page]!==undefined) navLinks[navMap[page]]?.classList.add('active');
  window.scrollTo(0,0);
}

// ===== NOTIFICATION BAR =====
function initNotifBar(){
  const notifs = [
    {text:'üü¢ Paracetamol 650mg ‚Äì 15% OFF this week!',type:'sale'},
    {text:'üî¥ Ibuprofen 400mg ‚Äì Low Stock (8 units left)',type:'low'},
    {text:'üü° NORSAN Omega-3 ‚Äì Popular reorder alert',type:'sale'},
    {text:'üî¥ Amoxicillin 500mg ‚Äì Critical stock (5 units)',type:'low'},
    {text:'üü¢ Vividrin Augentropfen ‚Äì New batch arrived',type:'sale'},
    {text:'üî¥ Cetirizine 10mg ‚Äì Refill needed',type:'low'},
    {text:'üíö OMNi-BiOTiC SR-9 ‚Äì 10% OFF for loyal customers',type:'sale'},
    {text:'üì¶ Weekly delivery: Wednesday 10am',type:'sale'},
  ];
  const ticker = document.getElementById('notifTicker');
  // duplicate for seamless loop
  [...notifs,...notifs].forEach(n=>{
    const el = document.createElement('span');
    el.className = 'notif-item';
    el.innerHTML = `${n.text} <span class="badge ${n.type==='sale'?'badge-sale':'badge-low'}">${n.type==='sale'?'SALE':'LOW STOCK'}</span>`;
    ticker.appendChild(el);
  });
}

// ===== HERO SEARCH =====
function heroSearch(val){
  const box = document.getElementById('heroSearchResults');
  if(!val||val.length<2){box.style.display='none';return}
  const results = PRODUCTS.filter(p=>p.name.toLowerCase().includes(val.toLowerCase())||p.cat.toLowerCase().includes(val.toLowerCase()));
  if(!results.length){box.style.display='none';return}
  box.innerHTML = results.slice(0,8).map(p=>`
    <div class="search-result-item" onclick="addToCart(${p.id})">
      <div>
        <div class="sri-name">${p.name}</div>
        <div style="font-size:.72rem;color:var(--muted)">${p.size} ¬∑ ${p.cat}</div>
      </div>
      <div class="sri-price">‚Ç¨${p.price.toFixed(2)}</div>
    </div>
  `).join('');
  box.style.display='block';
}
document.addEventListener('click',e=>{
  if(!e.target.closest('.hero-search-wrap')) document.getElementById('heroSearchResults').style.display='none';
});

// ===== PRODUCTS GRID =====
function renderProducts(list){
  const grid = document.getElementById('productsGrid');
  grid.innerHTML = list.map(p=>`
    <div class="feature-card" style="cursor:pointer" onclick="addToCart(${p.id})">
      <div class="feature-icon">${p.cat==='Supplements'?'üîµ':p.cat==='Vitamins'?'üü°':p.cat==='Eye Care'?'üëÅÔ∏è':p.cat==='Skincare'?'üåø':p.cat==='Gastro'?'üü¢':p.cat==='Respiratory'?'üí®':p.cat==='Urology'?'üíä':'üíä'}</div>
      <h4 class="feature-title">${p.name}</h4>
      <p class="feature-desc">${p.desc}</p>
      <div style="display:flex;align-items:center;justify-content:space-between;margin-top:14px">
        <span style="font-family:var(--font-head);font-weight:800;font-size:1.1rem;color:var(--accent)">‚Ç¨${p.price.toFixed(2)}</span>
        <button onclick="event.stopPropagation();addToCart(${p.id})" style="background:var(--g3);border:none;border-radius:8px;padding:6px 14px;color:#fff;font-size:.78rem;font-weight:600;cursor:pointer">+ Cart</button>
      </div>
      <div style="margin-top:8px;font-size:.72rem;color:var(--muted)">${p.size} ¬∑ ${p.stock} in stock</div>
    </div>
  `).join('');
}
function filterProducts(val){
  const pf = document.getElementById('priceFilter')?.value||'';
  let list = PRODUCTS;
  if(val) list = list.filter(p=>p.name.toLowerCase().includes(val.toLowerCase())||p.cat.toLowerCase().includes(val.toLowerCase()));
  if(pf==='low') list = list.filter(p=>p.price<15);
  if(pf==='mid') list = list.filter(p=>p.price>=15&&p.price<=30);
  if(pf==='high') list = list.filter(p=>p.price>30);
  renderProducts(list);
}

// ===== CART =====
function toggleCart(){
  document.getElementById('cartPanel').classList.toggle('open');
}
function addToCart(productId){
  const p = PRODUCTS.find(x=>x.id===productId);
  if(!p){showToast('Product not found');return}
  const existing = cart.find(x=>x.id===productId);
  if(existing) existing.qty++;
  else cart.push({...p,qty:1});
  updateCartUI();
  showToast(`‚úÖ ${p.name} added to cart`);
}
function updateCartQty(id,delta){
  const item = cart.find(x=>x.id===id);
  if(!item) return;
  item.qty = Math.max(0,item.qty+delta);
  if(item.qty===0) cart = cart.filter(x=>x.id!==id);
  updateCartUI();
}
function updateCartUI(){
  const total = cart.reduce((a,b)=>a+b.qty,0);
  document.getElementById('cartBadge').textContent = total;
  const container = document.getElementById('cartItems');
  const footer = document.getElementById('cartFooter');
  if(!cart.length){
    container.innerHTML = '<div class="empty-cart"><span class="icon">üõí</span>Your cart is empty</div>';
    footer.innerHTML='';return;
  }
  container.innerHTML = cart.map(item=>`
    <div class="cart-item">
      <div class="cart-item-icon">üíä</div>
      <div class="cart-item-info">
        <div class="cart-item-name">${item.name}</div>
        <div class="cart-item-price">‚Ç¨${(item.price*item.qty).toFixed(2)}</div>
      </div>
      <div class="cart-item-qty">
        <button onclick="updateCartQty(${item.id},-1)">‚àí</button>
        <span>${item.qty}</span>
        <button onclick="updateCartQty(${item.id},1)">+</button>
      </div>
    </div>
  `).join('');
  const subtotal = cart.reduce((a,b)=>a+(b.price*b.qty),0);
  const shipping = subtotal>50?0:4.99;
  footer.innerHTML = `
    <div class="cart-total">
      <div class="cart-total-row"><span>Subtotal</span><span>‚Ç¨${subtotal.toFixed(2)}</span></div>
      <div class="cart-total-row"><span>Shipping</span><span>${shipping===0?'Free':'‚Ç¨'+shipping.toFixed(2)}</span></div>
      <div class="cart-total-row final"><span>Total</span><span>‚Ç¨${(subtotal+shipping).toFixed(2)}</span></div>
    </div>
    <button class="checkout-btn" onclick="checkout()">Checkout ‚Üí /api/v1/checkout</button>
  `;
}
function checkout(){
  showToast('üéâ Order placed! API: POST /api/v1/checkout');
  cart=[];updateCartUI();toggleCart();
}

// ===== AI CHAT =====
const aiResponses = {
  paracetamol: "‚úÖ Paracetamol 650mg is in stock (55 units). I can prepare 10 tablets for you. Shall I place the order?\n\n‚Üí API: POST /api/v1/orders/create",
  ibuprofen: "‚ö†Ô∏è Ibuprofen 400mg is running LOW (8 units). I recommend ordering a refill. Standard dose: 400mg every 4-6 hours.\n\n‚Üí API: GET /api/v1/inventory/ibuprofen",
  "check stock": "üì¶ Current stock levels:\n‚Ä¢ Paracetamol: 55 units ‚úÖ\n‚Ä¢ Ibuprofen: 8 units ‚ö†Ô∏è\n‚Ä¢ Amoxicillin: 5 units üî¥\n‚Ä¢ Cetirizine: 2 units üî¥\n\n‚Üí API: GET /api/v1/inventory/all",
  "my orders": "üìã Your recent orders:\n‚Ä¢ #ORD576 ‚Äì Paracetamol (2) ‚Äì Completed\n‚Ä¢ #ORD575 ‚Äì Amoxicillin (3) ‚Äì In Progress\n\n‚Üí API: GET /api/v1/orders?customer=me",
  omega: "üíä NORSAN Omega-3 Total (‚Ç¨27.00/200ml) is available. 32 units in stock. Rich in EPA & DHA for heart health.\n\n‚Üí API: GET /api/v1/products?search=omega-3",
  default: "ü§ñ I understand your request. Let me check our system...\n\nFor medication queries, I can help with:\n‚Ä¢ Stock availability\n‚Ä¢ Order placement\n‚Ä¢ Dosage guidance\n‚Ä¢ Price information\n\n‚Üí API: POST /api/v1/ai/chat"
};
function sendChat(){
  const input = document.getElementById('chatInput');
  const val = input.value.trim();
  if(!val) return;
  const chatArea = document.getElementById('chatArea');
  // clear placeholder
  const placeholder = chatArea.querySelector('.ai-placeholder');
  if(placeholder) placeholder.remove();
  // user msg
  chatArea.innerHTML += `<div class="chat-msg user">${val}</div>`;
  input.value='';
  // AI response
  setTimeout(()=>{
    const key = Object.keys(aiResponses).find(k=>val.toLowerCase().includes(k))||'default';
    const resp = aiResponses[key].replace(/\n/g,'<br>');
    chatArea.innerHTML += `<div class="chat-msg ai">${resp}<div class="msg-badge">ü§ñ AI Assistant ¬∑ just now</div></div>`;
    chatArea.scrollTop=chatArea.scrollHeight;
  },800);
  chatArea.scrollTop=chatArea.scrollHeight;
}
function quickChat(text){document.getElementById('chatInput').value=text;sendChat();}

// ===== VOICE CALL =====
let voiceActive = false;
function toggleVoiceCall(){
  voiceActive = !voiceActive;
  const btn = document.getElementById('voiceCallBtn');
  if(voiceActive){
    btn.textContent='üìµ End Call';
    btn.classList.add('active');
    showToast('üìû Connecting to AI Voice Agent... /api/v1/ai/voice-call');
  } else {
    btn.textContent='üìû Start Voice Call';
    btn.classList.remove('active');
    showToast('üìµ Voice call ended');
  }
}

// ===== PLACE ORDER =====
function placeOrder(){
  const med = document.getElementById('orderMedName').value;
  const qty = document.getElementById('orderQty').value;
  if(!med){showToast('‚ö†Ô∏è Please enter a medicine name');return}
  showToast(`‚úÖ Order placed: ${med} x${qty} ‚Üí POST /api/v1/orders/create`);
  closeModal('orderModal');
  // add to chat
  const chatArea = document.getElementById('chatArea');
  const placeholder = chatArea.querySelector('.ai-placeholder');
  if(placeholder) placeholder.remove();
  chatArea.innerHTML += `<div class="chat-msg user">Order ${med} x${qty}</div>`;
  setTimeout(()=>{
    chatArea.innerHTML += `<div class="chat-msg ai">‚úÖ Order placed for ${qty}x ${med}!<br>Order #ORD${Math.floor(1000+Math.random()*9000)} created.<br>Pharmacy notified. üîî<div class="msg-badge">ü§ñ AI Assistant ¬∑ just now</div></div>`;
    chatArea.scrollTop=chatArea.scrollHeight;
  },600);
}

// ===== DASHBOARD DATA =====
function initDashboard(){
  // Recent orders
  const ro = document.getElementById('dashRecentOrders');
  if(ro) ro.innerHTML = ORDERS.slice(0,4).map(o=>`
    <div class="order-row">
      <span class="order-id">${o.id}</span>
      <span class="order-meds">${o.meds}</span>
      <span class="status-pill ${o.status==='Completed'?'status-paid':o.status==='In Progress'?'status-progress':'status-pending'}">${o.status}</span>
    </div>
  `).join('');
  // Inventory
  const inv = document.getElementById('dashInventory');
  if(inv) inv.innerHTML = STOCK.slice(0,6).map(s=>{
    const pct = Math.min(100,Math.round((s.stock/80)*100));
    const cls = s.stock<=s.reorder*0.5?'fill-crit':s.stock<=s.reorder*1.5?'fill-low':'fill-good';
    const label = s.stock<=5?'alert-crit':s.stock<=s.reorder?'alert-low':'alert-ok';
    const text = s.stock<=5?'Critical':s.stock<=s.reorder?'Low Stock':'In Stock';
    return `<div class="inv-row">
      <span class="inv-name">${s.name}</span>
      <span class="inv-stock">${s.stock}</span>
      <div class="inv-bar"><div class="inv-fill ${cls}" style="width:${pct}%"></div></div>
      <span class="inv-status ${label}">${text}</span>
    </div>`;
  }).join('');
  // Top products
  const tp = document.getElementById('dashTopProducts');
  if(tp){
    const topProds = [{name:'NORSAN Omega-3 Total',price:'‚Ç¨27',sold:300},{name:'Vitasprint Pro',price:'‚Ç¨15.95',sold:289},{name:'Kijimea Reizdarm PRO',price:'‚Ç¨38.99',sold:248},{name:'OMNi-BiOTiC SR-9',price:'‚Ç¨44.50',sold:220},{name:'Iberogast¬Æ Classic',price:'‚Ç¨28.98',sold:180}];
    tp.innerHTML = topProds.map((p,i)=>`
      <div class="top-prod-item">
        <div class="prod-rank">${i+1}</div>
        <div class="prod-info"><div class="prod-info-name">${p.name}</div><div class="prod-info-sold">${p.sold} sold</div></div>
        <div class="prod-price">${p.price}</div>
      </div>
    `).join('');
  }
  // Refills
  const rf = document.getElementById('dashRefills');
  if(rf) rf.innerHTML = [
    {id:'REQ-110',med:'Ibuprofen',qty:20},{id:'REQ-109',med:'Amoxicillin',qty:30},{id:'REQ-108',med:'Cetirizine',qty:15}
  ].map(r=>`
    <div class="order-row">
      <span class="order-id">${r.id}</span>
      <span class="order-meds">${r.med} ‚Äì ${r.qty} units</span>
      <button onclick="approveRefill('${r.id}')" style="background:rgba(34,197,94,.15);border:1px solid var(--g3);color:var(--g4);border-radius:6px;padding:4px 10px;font-size:.72rem;cursor:pointer">Approve</button>
      <span class="status-pill status-pending" style="margin-left:8px">Pending</span>
    </div>
  `).join('');
}
function approveRefill(id){showToast(`‚úÖ Refill ${id} approved ‚Üí PATCH /api/v1/refills/${id}`);}

// ===== ADMIN PANEL =====
function switchAdminSection(sec){
  document.querySelectorAll('.admin-section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.sidebar-link').forEach(l=>l.classList.remove('active'));
  document.getElementById('sec-'+sec)?.classList.add('active');
  document.querySelectorAll('.sidebar-link').forEach(l=>{
    if(l.textContent.toLowerCase().includes(sec.slice(0,4))) l.classList.add('active');
  });
  if(sec==='orders') renderOrders(ORDERS);
  if(sec==='products') renderAdminProducts(PRODUCTS);
  if(sec==='stock') renderStock(STOCK);
  if(sec==='customers') renderCustomers(CUSTOMERS);
  if(sec==='payments') renderPayments(PAYMENTS);
  if(sec==='overview') initOverviewCharts();
}
function renderOrders(list){
  document.getElementById('ordersTableBody').innerHTML = list.map(o=>`
    <tr>
      <td style="font-weight:700">${o.id}</td>
      <td>${o.meds}</td>
      <td>${o.customer}</td>
      <td style="font-weight:700;color:var(--accent)">${o.price}</td>
      <td><span class="status-pill ${o.status==='Completed'?'status-paid':o.status==='In Progress'?'status-progress':'status-pending'}">${o.status}</span></td>
      <td><span class="status-pill ${o.payment==='Paid'?'status-paid':'status-pending'}">${o.payment}</span></td>
      <td style="color:var(--muted)">${o.date}</td>
      <td><button onclick="showToast('üìã Order ${o.id} details ‚Üí GET /api/v1/orders/${o.id.slice(1)}')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:.72rem;cursor:pointer;color:var(--g4)">View</button></td>
    </tr>
  `).join('');
}
function filterOrders(val){
  const sf = document.getElementById('orderStatusFilter')?.value||'';
  let list = ORDERS;
  if(val) list = list.filter(o=>o.id.toLowerCase().includes(val.toLowerCase())||o.meds.toLowerCase().includes(val.toLowerCase())||o.customer.toLowerCase().includes(val.toLowerCase()));
  if(sf) list = list.filter(o=>o.status===sf);
  renderOrders(list);
}
function renderAdminProducts(list){
  document.getElementById('adminProductsBody').innerHTML = list.map(p=>`
    <tr>
      <td style="color:var(--muted);font-size:.75rem">${p.id}</td>
      <td style="font-weight:500">${p.name}</td>
      <td style="color:var(--muted)">${p.pzn}</td>
      <td style="font-weight:700;color:var(--accent)">‚Ç¨${p.price.toFixed(2)}</td>
      <td>${p.size}</td>
      <td style="color:var(--muted);font-size:.78rem;max-width:200px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap">${p.desc}</td>
      <td>
        <button onclick="showToast('‚úèÔ∏è Edit ${p.name} ‚Üí PUT /api/v1/products/${p.id}')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:.72rem;cursor:pointer;color:var(--g4);margin-right:4px">Edit</button>
        <button onclick="showToast('üóëÔ∏è Delete ‚Üí DELETE /api/v1/products/${p.id}')" style="background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.2);border-radius:6px;padding:4px 8px;font-size:.72rem;cursor:pointer;color:var(--danger)">Del</button>
      </td>
    </tr>
  `).join('');
}
function filterAdminProducts(val){
  renderAdminProducts(PRODUCTS.filter(p=>!val||p.name.toLowerCase().includes(val.toLowerCase())||p.pzn.includes(val)));
}
function renderStock(list){
  document.getElementById('stockTableBody').innerHTML = list.map((s,i)=>{
    const pct = Math.min(100,Math.round((s.stock/80)*100));
    const cls = s.stock<=s.reorder*0.5?'fill-crit':s.stock<=s.reorder*1.5?'fill-low':'fill-good';
    const label = s.stock<=5?'alert-crit':s.stock<=s.reorder?'alert-low':'alert-ok';
    const text = s.stock<=5?'üî¥ Critical':s.stock<=s.reorder?'‚ö†Ô∏è Low Stock':'‚úÖ OK';
    return `<tr>
      <td style="font-weight:500">${s.name}</td>
      <td style="color:var(--muted)">${s.pzn}</td>
      <td>
        <div style="display:flex;align-items:center;gap:8px">
          <div style="width:80px;height:6px;background:var(--surface);border-radius:3px;overflow:hidden"><div class="inv-fill ${cls}" style="width:${pct}%;height:100%"></div></div>
          <span class="stock-num" id="stock-${i}">${s.stock}</span>
        </div>
      </td>
      <td>
        <div class="stock-control">
          <button class="stock-btn" onclick="adjustStock(${i},-1)">‚àí</button>
          <button class="stock-btn" onclick="adjustStock(${i},1)">+</button>
          <button class="stock-btn" onclick="adjustStock(${i},10)" style="font-size:.7rem;padding:0 6px;width:auto">+10</button>
        </div>
      </td>
      <td><span class="${label}">${text}</span></td>
      <td style="color:var(--muted)">${s.reorder} units</td>
    </tr>`;
  }).join('');
}
function adjustStock(idx,delta){
  STOCK[idx].stock = Math.max(0,STOCK[idx].stock+delta);
  const el = document.getElementById('stock-'+idx);
  if(el) el.textContent = STOCK[idx].stock;
  showToast(`üì¶ Stock updated ‚Üí PATCH /api/v1/inventory/stock`);
  // re-render to update status/bar
  setTimeout(()=>renderStock(STOCK),500);
}
function filterStock(val){
  renderStock(STOCK.filter(s=>!val||s.name.toLowerCase().includes(val.toLowerCase())||s.pzn.includes(val)));
}
function renderCustomers(list){
  document.getElementById('customersTableBody').innerHTML = list.map(c=>`
    <tr>
      <td style="color:var(--muted)">${c.id}</td>
      <td style="font-weight:500">${c.name}</td>
      <td style="color:var(--muted)">${c.email}</td>
      <td style="color:var(--muted)">${c.phone}</td>
      <td>${c.orders}</td>
      <td style="font-weight:700;color:var(--accent)">${c.spent}</td>
      <td style="color:var(--muted)">${c.joined}</td>
      <td>
        <button onclick="showToast('üë§ View ${c.name} ‚Üí GET /api/v1/customers/${c.id}')" style="background:rgba(34,197,94,.1);border:1px solid var(--border);border-radius:6px;padding:4px 8px;font-size:.72rem;cursor:pointer;color:var(--g4)">View</button>
      </td>
    </tr>
  `).join('');
}
function filterCustomers(val){
  renderCustomers(CUSTOMERS.filter(c=>!val||c.name.toLowerCase().includes(val.toLowerCase())||c.email.toLowerCase().includes(val.toLowerCase())));
}
function renderPayments(list){
  document.getElementById('paymentsTableBody').innerHTML = list.map(p=>`
    <tr>
      <td style="font-weight:600;color:var(--muted)">${p.txn}</td>
      <td>${p.order}</td>
      <td>${p.customer}</td>
      <td style="font-weight:700;color:var(--accent)">${p.amount}</td>
      <td>${p.method}</td>
      <td><span class="status-pill ${p.status==='Completed'?'status-paid':'status-pending'}">${p.status}</span></td>
      <td style="color:var(--muted)">${p.date}</td>
    </tr>
  `).join('');
}

// ===== OVERVIEW CHARTS =====
function initOverviewCharts(){
  const revenueData = [8500,9200,7800,11200,10500,13400,18657,15300,12800,14500,11900,13200,16800];
  const chart = document.getElementById('revenueChart');
  if(chart){
    const max = Math.max(...revenueData);
    chart.innerHTML = revenueData.map((v,i)=>`
      <div class="chart-bar" style="height:${Math.round((v/max)*100)}%" data-val="‚Ç¨${(v/1000).toFixed(1)}k" title="Day ${i+1}: ‚Ç¨${v.toLocaleString()}"></div>
    `).join('');
  }
  const otc = document.getElementById('ordersTimeChart');
  if(otc){
    const odata = [12,18,25,42,38,22,15];
    const omax = Math.max(...odata);
    otc.innerHTML = odata.map(v=>`<div style="background:linear-gradient(to top,rgba(34,197,94,.4),rgba(34,197,94,.8));border-radius:4px 4px 0 0;flex:1;margin:0 2px;height:${Math.round((v/omax)*100)}%"></div>`).join('');
  }
  const otp = document.getElementById('overviewTopProd');
  if(otp){
    const topProds = [{name:'NORSAN Omega-3',sold:300},{name:'Vitasprint Pro',sold:289},{name:'Kijimea PRO',sold:248},{name:'OMNi-BiOTiC',sold:220},{name:'Iberogast¬Æ',sold:180}];
    otp.innerHTML = topProds.map((p,i)=>`
      <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
        <span style="font-size:.75rem;color:var(--muted);min-width:16px">${i+1}</span>
        <div style="flex:1">
          <div style="font-size:.8rem;margin-bottom:3px">${p.name}</div>
          <div style="height:4px;background:var(--surface);border-radius:2px;overflow:hidden"><div style="height:100%;background:var(--g4);width:${Math.round((p.sold/300)*100)}%;border-radius:2px"></div></div>
        </div>
        <span style="font-size:.75rem;color:var(--accent);font-weight:700">${p.sold}</span>
      </div>
    `).join('');
  }
}

// ===== MODALS =====
function openModal(id){document.getElementById(id)?.classList.add('open')}
function closeModal(id){document.getElementById(id)?.classList.remove('open')}
function closeModalOutside(e,id){if(e.target.id===id)closeModal(id)}
function handleLogin(){
  showToast('‚úÖ Logged in ‚Üí POST /api/v1/auth/login');
  closeModal('loginModal');
  showPage('admin');
  setTimeout(()=>switchAdminSection('overview'),100);
}

// ===== TOAST =====
function showToast(msg){
  const t = document.createElement('div');
  t.className = 'toast';
  t.textContent = msg;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),3000);
}

// ===== INIT =====
function init(){
  initNotifBar();
  renderProducts(PRODUCTS);
  initDashboard();
  initOverviewCharts();

  // Animate stats counter
  const targets = {statMeds:52};
  Object.entries(targets).forEach(([id,target])=>{
    let current=0;
    const el=document.getElementById(id);
    if(!el)return;
    const step=Math.ceil(target/40);
    const interval=setInterval(()=>{
      current=Math.min(current+step,target);
      el.textContent=current;
      if(current>=target)clearInterval(interval);
    },30);
  });
}
document.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
